plugins {
    id 'base.java-conventions'
}

dependencies {
}

jar.enabled =false
bootJar.enabled = true

bootJar {
    archiveExtension = 'jar'
    archiveBaseName = 'api-delivery'
}

tasks.register('copyDeps', Copy) {
    dependsOn 'cleanDeps'
    doFirst {
        println "##> Task :api-delivery:copyDeps:START"
    }
    from(sourceSets.main.runtimeClasspath)
    includeEmptyDirs = false
    into('/opt/app/api-delivery/classes/')

    doLast {
        println "##> Task :api-delivery:copyDeps:DONE"
    }
}

tasks.register('cleanDeps', Delete) {
    delete '/opt/app/api-delivery/classes/'
}