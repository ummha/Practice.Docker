plugins {
    id 'base.java-conventions'
}

dependencies {
}

jar.enabled =false
bootJar.enabled = true

bootJar {
    archiveExtension = 'jar'
    archiveBaseName = 'api-delivery'
}

tasks.register('copyDeps', Copy) {
    dependsOn 'cleanDeps'
    doFirst {
        println """
        ##> START:api:delivery - copyDeps  :: $sourceSets.main.runtimeClasspath
        """
    }
    from(sourceSets.main.runtimeClasspath)
    includeEmptyDirs = false
    into('/opt/app/api-delivery/classes/')
    doLast {
        println """
        ##> DONE:api:delivery - copyDeps  :: $sourceSets.main.runtimeClasspath
        """
    }
}

tasks.register('cleanDeps', Delete) {
    delete '/opt/app/api-delivery/classes/'
}